---
include:
  - project: nci-gdc/gitlab-templates
    ref: 0.5.0
    file:
      - templates/global/full.yaml
      - templates/python/full.yaml
      - templates/common/python.yaml
      - templates/common/docker.yaml

tox:
  image: ${BASE_CONTAINER_REGISTRY}/${REPO_PY_VERSION}-builder:${BASE_CONTAINER_VERSION}
  before_script:
    - mkdir -p /usr/share/man/man1
  parallel:
    matrix:
      - REPO_PY_VERSION: [python3.8, python3.9, python3.10]

release:
  variables:
    RELEASE_PY_VERION: python3.8

Docker build:
  script:
    - /bin/bash docker.sh

Docker build git tag:
  rules:
    - when: never